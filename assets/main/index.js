System.register("chunks:///_virtual/VideoCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i;return{setters:[function(e){t=e.asyncToGenerator},function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"9578axkwt9GiKmMk2GWznXK","VideoCamera",void 0);e("default",function(){function e(){}var i=e.prototype;return i.Setup=function(){var e=t(regeneratorRuntime.mark((function e(){var t,i,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return t=document.getElementById("video"),i={audio:!1,video:{facingMode:"environment",width:{ideal:640},height:{ideal:480}}},e.next=6,navigator.mediaDevices.getUserMedia(i);case 6:return n=e.sent,t.srcObject=n,t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline","playsinline"),t.setAttribute("muted",""),t.style.width="640px",t.style.height="480px",e.abrupt("return",new Promise((function(e,i){t.onloadedmetadata=function(){r.Resize(t),e(t)}})));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.Resize=function(e){var t=window.innerWidth,i=window.innerHeight,n=e.videoWidth/e.videoHeight;if(t/i<n){var r=n*i;e.style.width=r+"px",e.style.marginLeft=-(r-t)/2+"px",e.style.height=i+"px",e.style.marginTop="0px"}else{var a=1/(n/t);e.style.height=a+"px",e.style.marginTop=-(a-i)/2+"px",e.style.width=t+"px",e.style.marginLeft="0px"}},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./VideoCamera.ts"],(function(e){"use strict";var t,i,a,n,c,r,o,s,l,h,d,u,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,c=e.defineProperty},function(e){r=e.cclegacy,o=e._decorator,s=e.Camera,l=e.Node,h=e.view,d=e.Vec3,u=e.Component},function(e){v=e.default}],execute:function(){var g,p,f,b,w,y,m;r._RF.push({},"d98c6lPlPhIio4tyB45R8+K","GameMgr",void 0);var R=o.ccclass,k=o.property;e("GameMgr",(g=R("GameMgr"),p=k(s),f=k(l),g((y=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(n(t),"camera",y,n(t)),a(n(t),"cube",m,n(t)),c(n(t),"videoCamera",new v),c(n(t),"videoDom",void 0),c(n(t),"deepAR",void 0),t}i(t,e);var r=t.prototype;return r.start=function(){var e=this,t=h.getVisibleSize(),i=document.getElementById("ar-canvas");i.width=t.width,i.height=t.height,WebARRocksResizer.size_canvas({canvasId:"ar-canvas",callback:function(){e.startRocksAR()}})},r.update=function(e){},r.JeelizArInit=function(){var e=this,t=window.JEELIZFACEFILTER;t.init({videoSettings:{flip:!1},canvasId:"ar-canvas",NNCPath:"./libs/jeeliz/nn/",callbackReady:function(e,i){if(!e){var a=h.getVisibleSize(),n=i.canvasElement;n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",n.width=a.width,n.height=a.height,t.resize()}},callbackTrack:function(i){t.render_video(),e.Sync(e.cube,i)}})},r.RockARInit=function(){var e=this,t=window.WEBARROCKSFACE;t.init({canvasId:"ar-canvas",NNCPath:"./libs/rocks/neuralNets/",callbackReady:function(e,i){if(!e){var a=h.getVisibleSize(),n=i.canvasElement;n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",n.width=a.width,n.height=a.height,console.log("canvas.width = "+n.width+" canvas.height = "+n.height),t.resize()}},callbackTrack:function(i){t.render_video(),e.Sync(e.cube,i)}})},r.startRocksAR=function(){var e=this;WebARRocksFaceDebugHelper.init({spec:{GPUThermalThrottlingDetectionEnabled:!0,canvasId:"ar-canvas",NNCPath:"./libs/rocks/neuralNets/"},callbackReady:function(e,t){},callbackTrack:function(t){e.Sync(e.cube,t)}})},r.Sync=function(e,t){e.active=t.detected>.7;var i=Math.tan(this.camera.camera.aspect*this.camera.fov*Math.PI/360),a=t.s,n=1/(2*a*i);console.log("tanFOV ="+i+" W="+a+" D="+n);var c=t.x,r=t.y;console.log("xv="+c+", yv="+r);var o=-n-.5,s=c*n*i,l=r*n*i/this.camera.camera.aspect;e.position=new d(s,l,o),e.eulerAngles=new d(180*t.rx/Math.PI,180*t.ry/Math.PI,180*t.rz/Math.PI)},t}(u)).prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(w.prototype,"cube",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=w))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./VideoCamera.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});